<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Colors Dashboard</title>
    <link rel="stylesheet" href="../dashboard.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,opsz,wght@0,6..72,200..800;1,6..72,200..800&display=swap" rel="stylesheet">
    <style>
        .dashboard-main {
            display: none;
        }
        
        .dashboard-main.show {
            display: block;
        }

        .homepage-admin-dashboard.hide {
            display: none;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">
            <h1 class="logo-text">Colors.</h1>
        </div>
        <button class="nav-hamburger" id="nav-hamburger">&#9776;</button> <!-- New hamburger for navbar -->
        <nav class="nav-menu" id="nav-menu">`
            <button class="btn logout-btn">Logout</button>
        </nav>
    </header>

    <section class="homepage-admin-dashboard">
        <!-- Sidebar Section -->
        <aside class="sidebar" id="sidebar">
            <ul class="sidebar-list">
                <li><a href="#clients" class="sidebar-link">Clients</a></li>
            </ul>
        </aside>
    
        <!-- Main Content Section -->
        <div class="main-content">
            <!-- Clients Section -->
            <section id="clients" class="client content">
                <div class="item-list">
                    <div class="item" data-client-id="1">
                        <div class="item-details">
                            <h2 class="item-title">EDIT EVENTS</h2>
                            <p class="item-description">Here, you can add vendors for the event of the clients</p>
                        </div>
                    </div>                    
                </div>
            </section>
    
            
    </section>
    
    <main class="dashboard-main">
        
        <div class="overlay" id="overlay"></div> <!-- Existing overlay -->
        <aside class="sidebar" id="sidebar">
            <!-- Back to Dashboard Button -->
            <button class="btn back-btn" id="back-to-dashboard">‚Üê Back to Dashboard</button>
            <!-- Sidebar Links -->
            <ul class="sidebar-list">
                <li><a href="#venue" class="sidebar-link">Venue</a></li>
                <li><a href="#officiant" class="sidebar-link">Officiant</a></li>
                <li><a href="#music" class="sidebar-link">Music</a></li>
                <li><a href="#photographer" class="sidebar-link">Photographer</a></li>
                <li><a href="#makeup" class="sidebar-link">Hair and Make-up</a></li>
                <li><a href="#invitations" class="sidebar-link">Invitations and Handcrafts</a></li>
                <li><a href="#flowers" class="sidebar-link">Flowers and Decorations</a></li>
                <li><a href="#payment" class="sidebar-link">Review Payment</a></li>
            </ul>
        </aside>

        <!-- Ensure this structure for each section -->
        <section id="venue" class="venue content">
            <div class="search-bar">
                <button class="hamburger">&#9776;</button> <!-- Hamburger button -->
                <input type="text" class="search-input" placeholder="Search for venues...">
                <button class="btn search-btn">&#x1F50D;</button>
            </div>
            <div class="item-list">
                <div class="item-list">
                    <div class="item">
                        <img src="../venue.jpg" alt="Venue Image" class="item-image">
                        <div class="item-details">
                            <h2 class="item-title">Dusit Thani</h2>
                            <p class="item-description">Stella Hizon Reyes Drive, Barrio Pampanga, 8000 Davao City Davao Region</p>
                            <p class="item-description">Convention Hall</p>
                            <p class="item-description">Php 200,000</p>
                        </div> 
                    </div>
                </div> 
                <div class="item">
                    <img src="add.png" class="item-image">
                    <div class="item-details">
                        <h2 class="title">Add a venue</h2>
                    </div>
                </div>
            </div>            
        </section>
        <!-- Add Venue Form Modal -->
        <div id="addVenueModal" class="modal hidden">
            <div class="modal-content">
                <span id="closeAddVenueModal" class="close">&times;</span>
                <h2>Add a New Venue</h2>
                <form id="addVenueForm">
                    <label for="venueName">Venue Name:</label>
                    <input type="text" id="venueName" name="venueName" required>

                    <label for="venueLocation">Location:</label>
                    <input type="text" id="venueLocation" name="venueLocation" required>

                    <label for="venueType">Type of Venue:</label>
                    <input type="text" id="venueType" name="venueType" required>

                    <label for="venuePrice">Venue Price:</label>
                    <input type="number" id="venuePrice" name="venuePrice" required>

                    <label for="venueImage">Venue Image URL:</label>
                    <input type="text" id="venueImage" name="venueImage">

                    <div class="button-group">
                        <button type="submit" class="btn">Add Venue</button>
                        <button type="button" id="cancelAddVenue" class="btn cancel-btn">Cancel</button>
                    </div>
                </form>
            </div>
        </div>

        <section id="flowers" class="flowers content">
            <div class="search-bar">
                <button class="hamburger">&#9776;</button> <!-- Hamburger button -->
                <input type="text" class="search-input" placeholder="Search for flowers...">
                <button class="btn search-btn">&#x1F50D;</button>
            </div>
            <div class="item-list">
                <div class="item-list">
                    <div class="item">
                        <img src="../flower.jpg" alt="Flowers Image" class="item-image">
                        <div class="item-details">
                            <h2 class="item-title">Golden Star Flower Shop</h2>
                            <p class="item-description">Roses</p>
                            <p class="item-description">Php 10,000</p>
                        </div>
                    </div>
                </div>  
                <div class="item">
                    <img src="add.png" class="item-image">
                    <div class="details">
                        <h2 class="title">Add flower and decorations</h2>
                    </div>
                </div>
            </div>            
        </section>
        <!-- Add Flower Form Modal -->
        <div id="addFlowerModal" class="modal hidden">
            <div class="modal-content">
                <span id="closeAddFlowerModal" class="close">&times;</span>
                <h2>Add a New Flower</h2>
                <form id="addFlowerForm">
                    <label for="flowerShop">Flower Shop:</label>
                    <input type="text" id="flowerShop" name="flower_shop" placeholder="Enter flower shop name" required>

                    <label for="flowerType">Type of Flower:</label>
                    <select id="flowerType" name="flower_type" required>
                        <option value="">Select type</option>
                        <option value="Rose">Rose</option>
                        <option value="Lily">Lily</option>
                        <option value="Others">Others</option>
                    </select>

                    <!-- Additional input for "Others" -->
                    <div id="otherFlowerTypeContainer" class="hidden">
                        <label for="otherFlowerType">Specify Flower Type:</label>
                        <input type="text" id="otherFlowerType" name="other_flower_type" placeholder="Enter flower type">
                    </div>

                    <label for="flowerImage">Upload Flower Image:</label>
                    <input type="file" id="flowerImage" name="flower_image" accept="image/*">
                    
                    <label for="flowerPrice">Flower Price:</label>
                    <input type="text" id="flowePrice" name="flower_price" placeholder="Enter value in peso" required>

                    <button type="submit" class="btn">Add Flower</button>
                    <button type="button" id="cancelAddFlower" class="btn cancel-btn">Cancel</button>
                </form>
            </div>
        </div>

        <section id="invitations" class="invitations content">
            <div class="search-bar">
                <button class="hamburger">&#9776;</button> <!-- Hamburger button -->
                <input type="text" class="search-input" placeholder="Search for invites...">
                <button class="btn search-btn">&#x1F50D;</button>
            </div>
            <div class="item-list">
                <div class="item">
                    <div class="item-details">
                        <h2 class="item-title">150</h2>
                        <p class="item-description">150 guests are attending this event.</p>
                    </div>
                </div>
                <div class="item">
                    <img src="add.png" class="item-image">
                    <div class="item-details">
                        <h2 class="item-title">Add the number of attendees</h2>
                    </div>
                </div>
            </div>            
        </section>
        <!-- Add Attendees Form Modal -->
        <div id="addAttendeesModal" class="modal hidden">
            <div class="modal-content">
                <span id="closeAddAttendeesModal" class="close">&times;</span>
                <h2>Add Number of Attendees</h2>
                <form id="addAttendeesForm">
                    <label for="numberOfAttendees">Number of Attendees:</label>
                    <input type="number" id="numberOfAttendees" name="number_of_attendees" placeholder="Enter number of attendees" required min="1">

                    <button type="submit" class="btn">Add Attendees</button>
                    <button type="button" id="cancelAddAttendees" class="btn cancel-btn">Cancel</button>
                </form>
            </div>
        </div>

        <section id="makeup" class="makeup content">
            <div class="search-bar">
                <button class="hamburger">&#9776;</button> <!-- Hamburger button -->
                <input type="text" class="search-input" placeholder="Search for make-up artists...">
                <button class="btn search-btn">&#x1F50D;</button>
            </div>
            <div class="item-list">
                <div class="item">
                    <img src="../hmua.jpg" alt="Artist Image" class="item-image">
                    <div class="item-details">
                        <h2 class="item-title">Hair and Make-up Artist</h2>
                        <p class="item-description">Hairstylist: Anna Hermoso</p>
                        <p class="item-description">Hairstylist Rate: Php 3,000</p>
                        <p class="item-description">Make-up artist: Ian Carl Solana</p>
                        <p class="item-description">Make-up artist: Php 3,000</p>
                    </div>
                </div>
                <div class="item">
                    <img src="add.png" class="item-image">
                    <div class="item-details">
                        <h2 class="item-title">Add a hair and make-up artist</h2>
                    </div>
                </div>
            </div>            
        </section>

        <!-- Add Hair and Make-up Artist Form Modal -->
        <div id="addArtistModal" class="modal hidden">
            <div class="modal-content">
                <span id="closeAddArtistModal" class="close">&times;</span>
                <h2>Add Hair and Make-up Artist</h2>
                <form id="addArtistForm">
                    <label for="makeupArtistName">Name of Make-up Artist:</label>
                    <input type="text" id="makeupArtistName" name="makeup_artist_name" placeholder="Enter make-up artist's name" required>

                    <label for="hairstylistName">Name of Hairstylist:</label>
                    <input type="text" id="hairstylistName" name="hairstylist_name" placeholder="Enter hairstylist's name" required>

                    <label for="makeupCharge">Make-up Artist Charge/Rate:</label>
                    <input type="number" id="makeupCharge" name="makeup_charge" placeholder="Enter charge/rate" required min="0">

                    <label for="hairstylistCharge">Hairstylist Charge/Rate:</label>
                    <input type="number" id="hairstylistCharge" name="hairstylist_charge" placeholder="Enter charge/rate" required min="0">

                    <label for="artistImage">Upload Artist Image:</label>
                    <input type="file" id="artistImage" name="artist_image" accept="image/*">

                    <button type="submit" class="btn">Add Artist</button>
                    <button type="button" id="cancelAddArtist" class="btn cancel-btn">Cancel</button>
                </form>
            </div>
        </div>

        <section id="music" class="music content">
            <div class="search-bar">
                <button class="hamburger">&#9776;</button> <!-- Hamburger button -->
                <input type="text" class="search-input" placeholder="Search for band...">
                <button class="btn search-btn">&#x1F50D;</button>
            </div>
            <div class="item-list">
                <div class="item">
                    <img src="../band.jpg" alt="Band Image" class="item-image">
                    <div class="item-details">
                        <h2 class="item-title">Precal Droputs</h2>
                        <p class="item-description">Php 20,000</p>
                    </div>
                </div>
                <div class="item">
                    <img src="add.png" class="item-image">
                    <div class="item-details">
                        <h2 class="item-title">Add a music/band</h2>
                    </div>
                </div>
            </div>            
        </section>
        <!-- Add Music/Band Form Modal -->
        <div id="addMusicModal" class="modal hidden">
            <div class="modal-content">
                <span id="closeAddMusicModal" class="close">&times;</span>
                <h2>Add a New Band/Singer</h2>
                <form id="addMusicForm">
                    <label for="musicName">Name of the Band/Singer:</label>
                    <input type="text" id="musicName" name="music_name" placeholder="Enter band/singer's name" required>

                    <label for="musicCharge">Charge/Rate:</label>
                    <input type="number" id="musicCharge" name="music_charge" placeholder="Enter charge/rate" required min="0">

                    <label for="musicImage">Upload Band/Singer Image:</label>
                    <input type="file" id="musicImage" name="music_image" accept="image/*">

                    <button type="submit" class="btn">Add Music/Band</button>
                    <button type="button" id="cancelAddMusic" class="btn cancel-btn">Cancel</button>
                </form>
            </div>
        </div>

        <section id="officiant" class="officiant content">
            <div class="search-bar">
                <button class="hamburger">&#9776;</button> <!-- Hamburger button -->
                <input type="text" class="search-input" placeholder="Search for officiant...">
                <button class="btn search-btn">&#x1F50D;</button>
            </div>
            <div class="item-list">
                <div class="item">
                    <img src="host.jpg" alt="Officiant Image" class="item-image">
                    <div class="item-details">
                        <h2 class="item-title">Jero Testado</h2>
                        <p class="item-description">Php 3,000</p>
                    </div>
                </div>
                <div class="item">
                    <img src="add.png" class="item-image">
                    <div class="item-details">
                        <h2 class="item-title">Add an officiant</h2>
                    </div>
                </div>
            </div>            
        </section>
        <!-- Add Officiant/Host Form Modal -->
        <div id="addOfficiantModal" class="modal hidden">
            <div class="modal-content">
                <span id="closeAddOfficiantModal" class="close">&times;</span>
                <h2>Add a New Officiant/Host</h2>
                <form id="addOfficiantForm">
                    <label for="officiantName">Name of the Officiant/Host:</label>
                    <input type="text" id="officiantName" name="officiant_name" placeholder="Enter officiant/host's name" required>

                    <label for="officiantCharge">Charge/Rate:</label>
                    <input type="number" id="officiantCharge" name="officiant_charge" placeholder="Enter charge/rate" required min="0">

                    <label for="officiantImage">Upload Officiant/Host Image:</label>
                    <input type="file" id="officiantImage" name="officiant_image" accept="image/*">

                    <button type="submit" class="btn">Add Officiant/Host</button>
                    <button type="button" id="cancelAddOfficiant" class="btn cancel-btn">Cancel</button>
                </form>
            </div>
        </div>

        <section id="photographer" class="photographer content">
            <div class="search-bar">
                <button class="hamburger">&#9776;</button> <!-- Hamburger button -->
                <input type="text" class="search-input" placeholder="Search for photographer...">
                <button class="btn search-btn">&#x1F50D;</button>
            </div>
            <div class="item-list">
                <div class="item">
                    <img src="../photographer.jpeg" alt="Photographer Image" class="item-image">
                    <div class="item-details">
                        <h2 class="item-title">Marlon Guillano Photography</h2>
                        <p class="item-description">Php 10,000</p>
                    </div>
                </div>
                <div class="item">
                    <img src="add.png" class="item-image">
                    <div class="item-details">
                        <h2 class="item-title">Add a photographer</h2>
                    </div>
                </div>
            </div>            
        </section>
        <!-- Add Photographer/Videographer Form Modal -->
        <div id="addPhotographerModal" class="modal hidden">
            <div class="modal-content">
                <span id="closeAddPhotographerModal" class="close">&times;</span>
                <h2>Add a New Photographer/Videographer</h2>
                <form id="addPhotographerForm">
                    <label for="photographerName">Name of the Photographer/Videographer:</label>
                    <input type="text" id="photographerName" name="photographer_name" placeholder="Enter photographer/videographer's name" required>

                    <label for="photographerCharge">Charge/Rate:</label>
                    <input type="number" id="photographerCharge" name="photographer_charge" placeholder="Enter charge/rate" required min="0">

                    <label for="photographerImage">Upload Photographer Image:</label>
                    <input type="file" id="photographerImage" name="photographer_image" accept="image/*">

                    <button type="submit" class="btn">Add Photographer</button>
                    <button type="button" id="cancelAddPhotographer" class="btn cancel-btn">Cancel</button>
                </form>
            </div>
        </div>

        <section id="payment" class="payment content">
            <div class="item-list">
                <div class="item">
                    <div class="item-details">
                        <h2 class="item-title">Venue</h2>
                        <p class="item-description">Php 200,000</p>
                    </div>
                </div>
                <div class="item">
                    <div class="item-details">
                        <h2 class="item-title">Officiant/Host</h2>
                        <p class="item-description">Php 3,000</p>
                    </div>
                </div>
                <div class="item">
                    <div class="item-details">
                        <h2 class="item-title">Music</h2>
                        <p class="item-description">Php 20,000</p>
                    </div>
                </div>
                <div class="item">
                    <div class="item-details">
                        <h2 class="item-title">Photographer</h2>
                        <p class="item-description">Php 10,000</p>
                    </div>
                </div>
                <div class="item">
                    <div class="item-details">
                        <h2 class="item-title">Hair and Make-up</h2>
                        <p class="item-description">Php 6,000</p>
                    </div>
                </div>
                <div class="item">
                    <div class="item-details">
                        <h2 class="item-title">Flowers and Decorations</h2>
                        <p class="item-description">Php 10,000</p>
                    </div>
                </div>
                <div class="total_price">
                    <h2>Total Price: Php 249,000</h2>
                </div>
            </div>
            
            <button class="schedule-btn">Schedule Meeting with the client.</button>
        </section>
        

    </main>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const clientItems = document.querySelectorAll('#clients .item'); // Get all client items
        
            clientItems.forEach(item => {
                item.addEventListener('click', function() {
                    const clientId = this.dataset.clientId; // Get client ID from data attribute
                    sessionStorage.setItem('selectedClientId', clientId); // Store the client ID in session storage
                    showClientDashboard(clientId); // Call function to load and display the client dashboard
                });
            });
        });
        
        function showClientDashboard(clientId) {
            // Fetch and display the client's data
            fetch(`/get-user-event?user_id=${clientId}`)
                .then(response => response.json())
                .then(data => {
                    renderClientDetails(data); // Function to render client details
                    document.querySelector('.homepage-admin-dashboard').classList.add('hide');
                    document.querySelector('.dashboard-main').classList.add('show');
                })
                .catch(error => {
                    console.error('Failed to fetch client details:', error);
                    alert('Failed to load client details.');
                });
        }
        
        function renderClientDetails(data) {
            // Example: Update details in dashboard-main
            document.querySelector('#venue .item-title').textContent = data.venue || 'No Venue Selected';
            // Update other sections similarly
        }
        </script>
        
    <script>
        const hamburgerButtons = document.querySelectorAll('.hamburger');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const sidebarLinks = document.querySelectorAll('.sidebar-link');
        const navHamburger = document.getElementById('nav-hamburger');
        const navMenu = document.getElementById('nav-menu');

        hamburgerButtons.forEach(hamburger => {
            hamburger.addEventListener('click', () => {
                sidebar.classList.toggle('active');
                overlay.classList.toggle('active');
            });
        });

        overlay.addEventListener('click', () => {
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
            navMenu.classList.remove('active');
        });

        // Close the sidebar when a link is clicked on small screens (1024px or less)
        sidebarLinks.forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth <= 1024) {
                    sidebar.classList.remove('active');
                    overlay.classList.remove('active');
                }
            });
        });

        // Toggle nav menu for small screens (600px or less)
        navHamburger.addEventListener('click', () => {
            navMenu.classList.toggle('active');
            overlay.classList.toggle('active');
        });

        // Ensure the sidebar and nav menu are hidden initially for mobile view
        window.addEventListener('resize', () => {
            if (window.innerWidth > 1024) {
                sidebar.classList.remove('active');
                overlay.classList.remove('active');
            }
            if (window.innerWidth > 600) {
                navMenu.classList.remove('active');
                overlay.classList.remove('active');
            }
        });
    </script>
    
    
    
    <script src="../pagination.js"></script>
    <script src="../fetchClients.js" defer></script>
    <script src="../eventActions.js" defer></script>
    <script src="../adminDashboard.js" defer></script>

    <script>
        // Modal handling
        document.addEventListener('DOMContentLoaded', function() {
            const addVenueButton = document.querySelector('.item-details .title').closest('.item');
            const modal = document.getElementById('addVenueModal');
            const closeBtn = document.getElementById('closeAddVenueModal');
            const cancelBtn = document.getElementById('cancelAddVenue');

            if (addVenueButton && modal && closeBtn && cancelBtn) {
                // Show modal when clicking "Add a venue"
                addVenueButton.addEventListener('click', function() {
                    modal.classList.remove('hidden');
                });

                // Close modal functions
                function closeModal() {
                    modal.classList.add('hidden');
                }

                closeBtn.addEventListener('click', closeModal);
                cancelBtn.addEventListener('click', closeModal);

                // Close modal when clicking outside
                window.addEventListener('click', function(event) {
                    if (event.target === modal) {
                        closeModal();
                    }
                });
            } else {
                console.error('Some modal elements are missing');
            }
        });
    </script>

</body>
</html>
